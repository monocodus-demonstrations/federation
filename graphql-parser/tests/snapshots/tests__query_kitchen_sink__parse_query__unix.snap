---
source: graphql-parser/tests/tests.rs
expression: "format!(\"{}\\n---\\n{:#?}\", & input, & result)"
---
# Copyright (c) 2015-present, Facebook, Inc.
#
# This source code is licensed under the MIT license found in the
# LICENSE file in the root directory of this source tree.

query queryName($foo: ComplexType, $site: Site = MOBILE) {
  whoever123is: node(id: [123, 456]) {
    id ,
    ... on User @defer {
      field2 {
        id ,
        alias: field1(first:10, after:$foo,) @include(if: $foo) {
          id,
          ...frag
        }
      }
    }
    ... @skip(unless: $foo) {
      id
    }
    ... {
      id
    }
  }
}

mutation likeStory {
  like(story: 123) @defer {
    story {
      id
    }
  }
}

subscription StoryLikeSubscription($input: StoryLikeSubscribeInput) {
  storyLikeSubscribe(input: $input) {
    story {
      likers {
        count
      }
      likeSentence {
        text
      }
    }
  }
}

fragment frag on Friend {
  foo(size: $size, bar: $b, obj: {key: "value", block: """

      block string uses \"""

  """})
}

{
  unnamed(truthy: true, falsey: false, nullish: null),
  query
}

---
Ok(
    Document {
        definitions: [
            Operation(
                OperationDefinition {
                    position: Pos(6:1),
                    kind: Query,
                    description: None,
                    name: Some(
                        "queryName",
                    ),
                    variable_definitions: [
                        VariableDefinition {
                            position: Pos(6:17),
                            name: "foo",
                            var_type: NamedType(
                                "ComplexType",
                            ),
                            default_value: None,
                        },
                        VariableDefinition {
                            position: Pos(6:36),
                            name: "site",
                            var_type: NamedType(
                                "Site",
                            ),
                            default_value: Some(
                                Enum(
                                    "MOBILE",
                                ),
                            ),
                        },
                    ],
                    directives: [],
                    selection_set: SelectionSet {
                        span: (
                            Pos(6:58),
                            Pos(25:1),
                        ),
                        items: [
                            Field(
                                Field {
                                    position: Pos(7:3),
                                    alias: Some(
                                        "whoever123is",
                                    ),
                                    name: "node",
                                    arguments: [
                                        (
                                            "id",
                                            List(
                                                [
                                                    Int(
                                                        123,
                                                    ),
                                                    Int(
                                                        456,
                                                    ),
                                                ],
                                            ),
                                        ),
                                    ],
                                    directives: [],
                                    selection_set: SelectionSet {
                                        span: (
                                            Pos(7:38),
                                            Pos(24:3),
                                        ),
                                        items: [
                                            Field(
                                                Field {
                                                    position: Pos(8:5),
                                                    alias: None,
                                                    name: "id",
                                                    arguments: [],
                                                    directives: [],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(8:5),
                                                            Pos(8:5),
                                                        ),
                                                        items: [],
                                                    },
                                                },
                                            ),
                                            InlineFragment(
                                                InlineFragment {
                                                    position: Pos(9:9),
                                                    type_condition: Some(
                                                        "User",
                                                    ),
                                                    directives: [
                                                        Directive {
                                                            position: Pos(9:17),
                                                            name: "defer",
                                                            arguments: [],
                                                        },
                                                    ],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(9:24),
                                                            Pos(17:5),
                                                        ),
                                                        items: [
                                                            Field(
                                                                Field {
                                                                    position: Pos(10:7),
                                                                    alias: None,
                                                                    name: "field2",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(10:14),
                                                                            Pos(16:7),
                                                                        ),
                                                                        items: [
                                                                            Field(
                                                                                Field {
                                                                                    position: Pos(11:9),
                                                                                    alias: None,
                                                                                    name: "id",
                                                                                    arguments: [],
                                                                                    directives: [],
                                                                                    selection_set: SelectionSet {
                                                                                        span: (
                                                                                            Pos(11:9),
                                                                                            Pos(11:9),
                                                                                        ),
                                                                                        items: [],
                                                                                    },
                                                                                },
                                                                            ),
                                                                            Field(
                                                                                Field {
                                                                                    position: Pos(12:9),
                                                                                    alias: Some(
                                                                                        "alias",
                                                                                    ),
                                                                                    name: "field1",
                                                                                    arguments: [
                                                                                        (
                                                                                            "first",
                                                                                            Int(
                                                                                                10,
                                                                                            ),
                                                                                        ),
                                                                                        (
                                                                                            "after",
                                                                                            Variable(
                                                                                                "foo",
                                                                                            ),
                                                                                        ),
                                                                                    ],
                                                                                    directives: [
                                                                                        Directive {
                                                                                            position: Pos(12:46),
                                                                                            name: "include",
                                                                                            arguments: [
                                                                                                (
                                                                                                    "if",
                                                                                                    Variable(
                                                                                                        "foo",
                                                                                                    ),
                                                                                                ),
                                                                                            ],
                                                                                        },
                                                                                    ],
                                                                                    selection_set: SelectionSet {
                                                                                        span: (
                                                                                            Pos(12:65),
                                                                                            Pos(15:9),
                                                                                        ),
                                                                                        items: [
                                                                                            Field(
                                                                                                Field {
                                                                                                    position: Pos(13:11),
                                                                                                    alias: None,
                                                                                                    name: "id",
                                                                                                    arguments: [],
                                                                                                    directives: [],
                                                                                                    selection_set: SelectionSet {
                                                                                                        span: (
                                                                                                            Pos(13:11),
                                                                                                            Pos(13:11),
                                                                                                        ),
                                                                                                        items: [],
                                                                                                    },
                                                                                                },
                                                                                            ),
                                                                                            FragmentSpread(
                                                                                                FragmentSpread {
                                                                                                    position: Pos(14:14),
                                                                                                    fragment_name: "frag",
                                                                                                    directives: [],
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                    },
                                                                                },
                                                                            ),
                                                                        ],
                                                                    },
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                },
                                            ),
                                            InlineFragment(
                                                InlineFragment {
                                                    position: Pos(18:9),
                                                    type_condition: None,
                                                    directives: [
                                                        Directive {
                                                            position: Pos(18:9),
                                                            name: "skip",
                                                            arguments: [
                                                                (
                                                                    "unless",
                                                                    Variable(
                                                                        "foo",
                                                                    ),
                                                                ),
                                                            ],
                                                        },
                                                    ],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(18:29),
                                                            Pos(20:5),
                                                        ),
                                                        items: [
                                                            Field(
                                                                Field {
                                                                    position: Pos(19:7),
                                                                    alias: None,
                                                                    name: "id",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(19:7),
                                                                            Pos(19:7),
                                                                        ),
                                                                        items: [],
                                                                    },
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                },
                                            ),
                                            InlineFragment(
                                                InlineFragment {
                                                    position: Pos(21:9),
                                                    type_condition: None,
                                                    directives: [],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(21:9),
                                                            Pos(23:5),
                                                        ),
                                                        items: [
                                                            Field(
                                                                Field {
                                                                    position: Pos(22:7),
                                                                    alias: None,
                                                                    name: "id",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(22:7),
                                                                            Pos(22:7),
                                                                        ),
                                                                        items: [],
                                                                    },
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                },
                                            ),
                                        ],
                                    },
                                },
                            ),
                        ],
                    },
                },
            ),
            Operation(
                OperationDefinition {
                    position: Pos(27:1),
                    kind: Mutation,
                    description: None,
                    name: Some(
                        "likeStory",
                    ),
                    variable_definitions: [],
                    directives: [],
                    selection_set: SelectionSet {
                        span: (
                            Pos(27:20),
                            Pos(33:1),
                        ),
                        items: [
                            Field(
                                Field {
                                    position: Pos(28:3),
                                    alias: None,
                                    name: "like",
                                    arguments: [
                                        (
                                            "story",
                                            Int(
                                                123,
                                            ),
                                        ),
                                    ],
                                    directives: [
                                        Directive {
                                            position: Pos(28:20),
                                            name: "defer",
                                            arguments: [],
                                        },
                                    ],
                                    selection_set: SelectionSet {
                                        span: (
                                            Pos(28:27),
                                            Pos(32:3),
                                        ),
                                        items: [
                                            Field(
                                                Field {
                                                    position: Pos(29:5),
                                                    alias: None,
                                                    name: "story",
                                                    arguments: [],
                                                    directives: [],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(29:11),
                                                            Pos(31:5),
                                                        ),
                                                        items: [
                                                            Field(
                                                                Field {
                                                                    position: Pos(30:7),
                                                                    alias: None,
                                                                    name: "id",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(30:7),
                                                                            Pos(30:7),
                                                                        ),
                                                                        items: [],
                                                                    },
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                },
                                            ),
                                        ],
                                    },
                                },
                            ),
                        ],
                    },
                },
            ),
            Operation(
                OperationDefinition {
                    position: Pos(35:1),
                    kind: Subscription,
                    description: None,
                    name: Some(
                        "StoryLikeSubscription",
                    ),
                    variable_definitions: [
                        VariableDefinition {
                            position: Pos(35:36),
                            name: "input",
                            var_type: NamedType(
                                "StoryLikeSubscribeInput",
                            ),
                            default_value: None,
                        },
                    ],
                    directives: [],
                    selection_set: SelectionSet {
                        span: (
                            Pos(35:69),
                            Pos(46:1),
                        ),
                        items: [
                            Field(
                                Field {
                                    position: Pos(36:3),
                                    alias: None,
                                    name: "storyLikeSubscribe",
                                    arguments: [
                                        (
                                            "input",
                                            Variable(
                                                "input",
                                            ),
                                        ),
                                    ],
                                    directives: [],
                                    selection_set: SelectionSet {
                                        span: (
                                            Pos(36:37),
                                            Pos(45:3),
                                        ),
                                        items: [
                                            Field(
                                                Field {
                                                    position: Pos(37:5),
                                                    alias: None,
                                                    name: "story",
                                                    arguments: [],
                                                    directives: [],
                                                    selection_set: SelectionSet {
                                                        span: (
                                                            Pos(37:11),
                                                            Pos(44:5),
                                                        ),
                                                        items: [
                                                            Field(
                                                                Field {
                                                                    position: Pos(38:7),
                                                                    alias: None,
                                                                    name: "likers",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(38:14),
                                                                            Pos(40:7),
                                                                        ),
                                                                        items: [
                                                                            Field(
                                                                                Field {
                                                                                    position: Pos(39:9),
                                                                                    alias: None,
                                                                                    name: "count",
                                                                                    arguments: [],
                                                                                    directives: [],
                                                                                    selection_set: SelectionSet {
                                                                                        span: (
                                                                                            Pos(39:9),
                                                                                            Pos(39:9),
                                                                                        ),
                                                                                        items: [],
                                                                                    },
                                                                                },
                                                                            ),
                                                                        ],
                                                                    },
                                                                },
                                                            ),
                                                            Field(
                                                                Field {
                                                                    position: Pos(41:7),
                                                                    alias: None,
                                                                    name: "likeSentence",
                                                                    arguments: [],
                                                                    directives: [],
                                                                    selection_set: SelectionSet {
                                                                        span: (
                                                                            Pos(41:20),
                                                                            Pos(43:7),
                                                                        ),
                                                                        items: [
                                                                            Field(
                                                                                Field {
                                                                                    position: Pos(42:9),
                                                                                    alias: None,
                                                                                    name: "text",
                                                                                    arguments: [],
                                                                                    directives: [],
                                                                                    selection_set: SelectionSet {
                                                                                        span: (
                                                                                            Pos(42:9),
                                                                                            Pos(42:9),
                                                                                        ),
                                                                                        items: [],
                                                                                    },
                                                                                },
                                                                            ),
                                                                        ],
                                                                    },
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                },
                                            ),
                                        ],
                                    },
                                },
                            ),
                        ],
                    },
                },
            ),
            Fragment(
                FragmentDefinition {
                    position: Pos(48:1),
                    description: None,
                    name: "frag",
                    type_condition: "Friend",
                    directives: [],
                    selection_set: SelectionSet {
                        span: (
                            Pos(48:25),
                            Pos(54:1),
                        ),
                        items: [
                            Field(
                                Field {
                                    position: Pos(49:3),
                                    alias: None,
                                    name: "foo",
                                    arguments: [
                                        (
                                            "size",
                                            Variable(
                                                "size",
                                            ),
                                        ),
                                        (
                                            "bar",
                                            Variable(
                                                "b",
                                            ),
                                        ),
                                        (
                                            "obj",
                                            Object(
                                                {
                                                    "block": String(
                                                        "\nblock string uses \"\"\"\n\n",
                                                    ),
                                                    "key": String(
                                                        "value",
                                                    ),
                                                },
                                            ),
                                        ),
                                    ],
                                    directives: [],
                                    selection_set: SelectionSet {
                                        span: (
                                            Pos(49:3),
                                            Pos(49:3),
                                        ),
                                        items: [],
                                    },
                                },
                            ),
                        ],
                    },
                },
            ),
            SelectionSet(
                SelectionSet {
                    span: (
                        Pos(56:1),
                        Pos(59:1),
                    ),
                    items: [
                        Field(
                            Field {
                                position: Pos(57:3),
                                alias: None,
                                name: "unnamed",
                                arguments: [
                                    (
                                        "truthy",
                                        Boolean(
                                            true,
                                        ),
                                    ),
                                    (
                                        "falsey",
                                        Boolean(
                                            false,
                                        ),
                                    ),
                                    (
                                        "nullish",
                                        Null,
                                    ),
                                ],
                                directives: [],
                                selection_set: SelectionSet {
                                    span: (
                                        Pos(57:3),
                                        Pos(57:3),
                                    ),
                                    items: [],
                                },
                            },
                        ),
                        Field(
                            Field {
                                position: Pos(58:3),
                                alias: None,
                                name: "query",
                                arguments: [],
                                directives: [],
                                selection_set: SelectionSet {
                                    span: (
                                        Pos(58:3),
                                        Pos(58:3),
                                    ),
                                    items: [],
                                },
                            },
                        ),
                    ],
                },
            ),
        ],
    },
)
